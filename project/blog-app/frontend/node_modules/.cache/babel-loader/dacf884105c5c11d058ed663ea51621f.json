{"ast":null,"code":"var _jsxFileName = \"/home/aditya/SemiColon_selenium_tests/project/blog-app/frontend/src/components/pages/EditPage/EditPage.component.jsx\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport MDEditor from \"@uiw/react-md-editor\";\nimport { Flex, Box, Input, Button, Heading, useToast } from \"@chakra-ui/core\";\nimport theme from \"../../../themes/theme\";\nimport userContext from \"../../../context/userContext\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst EditPage = props => {\n  const {\n    blogInfo\n  } = props.location.state.data;\n  const {\n    userData\n  } = useContext(userContext);\n  const [value, setValue] = useState();\n  const [bannerURL, setBannerURL] = useState(\"\");\n  const [blogTitle, setBlogTitle] = useState(\"\");\n  const toast = useToast();\n  const history = useHistory();\n  useEffect(() => {\n    setBannerURL(blogInfo.bannerURL);\n    setBlogTitle(blogInfo.title);\n    setValue(blogInfo.content);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const {\n      user,\n      token\n    } = userData;\n\n    if (!user) {\n      toast({\n        title: \"Error!\",\n        status: \"error\",\n        description: \"You need to be logged in to Edit that blog.\",\n        isClosable: true\n      });\n      history.push(\"/user/login\");\n    } else {\n      const editedBlogData = {\n        title: blogTitle,\n        bannerURL: bannerURL,\n        content: value\n      };\n      const reqURL = `/blogs/${blogInfo.author}/${blogInfo._id}`;\n\n      if (userData.user.id) {\n        axios.interceptors.request.use(req => {\n          req.headers[\"x-auth-token\"] = token;\n          return req;\n        });\n        axios.patch(process.env.REACT_APP_BACKEND + reqURL, editedBlogData).then(res => {\n          toast({\n            title: \"Successfully Edited!\",\n            description: \"Your blog was updated.\",\n            status: \"success\",\n            isClosable: true\n          });\n          console.log(res);\n          history.push(\"/blogs\");\n        }).catch(err => {\n          toast({\n            title: \"Error!\",\n            description: \"Blog edit failed.\",\n            status: \"error\",\n            isClosable: true\n          });\n          history.push(\"/blogs\");\n        });\n      } else {\n        toast({\n          title: \"Some error occured.\",\n          description: \"Please log in and try again.\",\n          status: \"error\",\n          isClosable: true\n        });\n        history.push(\"/user/login\");\n      }\n    }\n  };\n\n  const handleBannerURL = e => {\n    setBannerURL(e.target.value);\n  };\n\n  const handleBlogTitle = e => {\n    setBlogTitle(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Flex, {\n    flexDirection: \"column\",\n    maxW: [\"90%\", \"1200px\"],\n    padding: \"0.5rem 1rem\",\n    border: \"2px solid #eee\",\n    borderRadius: \"10px\",\n    margin: \"1rem auto\",\n    backgroundColor: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Flex, {\n    margin: \"1rem 0\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    marginRight: \"2rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Edit Blog\")), /*#__PURE__*/React.createElement(Input, {\n    width: \"50%\",\n    value: bannerURL,\n    type: \"url\",\n    onChange: handleBannerURL,\n    name: \"bannerURL\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    margin: \"1rem 0\",\n    id: \"title\",\n    value: blogTitle,\n    onChange: handleBlogTitle,\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"New blog title here...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MDEditor, {\n    height: 400,\n    value: blogInfo.content,\n    onChange: setValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Flex, {\n    margin: \"1rem 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    backgroundColor: theme.colors.accent,\n    color: \"white\",\n    _hover: {\n      color: \"white\",\n      backgroundColor: \"#323EBE\"\n    },\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Publish\")))));\n};\n\nexport default EditPage;","map":{"version":3,"sources":["/home/aditya/SemiColon_selenium_tests/project/blog-app/frontend/src/components/pages/EditPage/EditPage.component.jsx"],"names":["React","useState","useEffect","useContext","MDEditor","Flex","Box","Input","Button","Heading","useToast","theme","userContext","useHistory","axios","EditPage","props","blogInfo","location","state","data","userData","value","setValue","bannerURL","setBannerURL","blogTitle","setBlogTitle","toast","history","title","content","handleSubmit","e","preventDefault","user","token","status","description","isClosable","push","editedBlogData","reqURL","author","_id","id","interceptors","request","use","req","headers","patch","process","env","REACT_APP_BACKEND","then","res","console","log","catch","err","handleBannerURL","target","handleBlogTitle","colors","accent","color","backgroundColor"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,KAApB,EAA2BC,MAA3B,EAAmCC,OAAnC,EAA4CC,QAA5C,QAA4D,iBAA5D;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B,QAAM;AAAEC,IAAAA;AAAF,MAAeD,KAAK,CAACE,QAAN,CAAeC,KAAf,CAAqBC,IAA1C;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAelB,UAAU,CAACS,WAAD,CAA/B;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,EAAlC;AACA,QAAM,CAACuB,SAAD,EAAYC,YAAZ,IAA4BxB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACyB,SAAD,EAAYC,YAAZ,IAA4B1B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM2B,KAAK,GAAGlB,QAAQ,EAAtB;AACA,QAAMmB,OAAO,GAAGhB,UAAU,EAA1B;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACduB,IAAAA,YAAY,CAACR,QAAQ,CAACO,SAAV,CAAZ;AACAG,IAAAA,YAAY,CAACV,QAAQ,CAACa,KAAV,CAAZ;AACAP,IAAAA,QAAQ,CAACN,QAAQ,CAACc,OAAV,CAAR;AACD,GAJQ,EAIN,EAJM,CAAT;;AAMA,QAAMC,YAAY,GAAIC,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBf,QAAxB;;AACA,QAAI,CAACc,IAAL,EAAW;AACTP,MAAAA,KAAK,CAAC;AACJE,QAAAA,KAAK,EAAE,QADH;AAEJO,QAAAA,MAAM,EAAE,OAFJ;AAGJC,QAAAA,WAAW,EAAE,6CAHT;AAIJC,QAAAA,UAAU,EAAE;AAJR,OAAD,CAAL;AAMAV,MAAAA,OAAO,CAACW,IAAR,CAAa,aAAb;AACD,KARD,MAQO;AACL,YAAMC,cAAc,GAAG;AACrBX,QAAAA,KAAK,EAAEJ,SADc;AAErBF,QAAAA,SAAS,EAAEA,SAFU;AAGrBO,QAAAA,OAAO,EAAET;AAHY,OAAvB;AAKA,YAAMoB,MAAM,GAAI,UAASzB,QAAQ,CAAC0B,MAAO,IAAG1B,QAAQ,CAAC2B,GAAI,EAAzD;;AACA,UAAIvB,QAAQ,CAACc,IAAT,CAAcU,EAAlB,EAAsB;AACpB/B,QAAAA,KAAK,CAACgC,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCC,GAAD,IAAS;AACtCA,UAAAA,GAAG,CAACC,OAAJ,CAAY,cAAZ,IAA8Bd,KAA9B;AACA,iBAAOa,GAAP;AACD,SAHD;AAIAnC,QAAAA,KAAK,CACFqC,KADH,CACSC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgCZ,MADzC,EACiDD,cADjD,EAEGc,IAFH,CAESC,GAAD,IAAS;AACb5B,UAAAA,KAAK,CAAC;AACJE,YAAAA,KAAK,EAAE,sBADH;AAEJQ,YAAAA,WAAW,EAAE,wBAFT;AAGJD,YAAAA,MAAM,EAAE,SAHJ;AAIJE,YAAAA,UAAU,EAAE;AAJR,WAAD,CAAL;AAMAkB,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA3B,UAAAA,OAAO,CAACW,IAAR,CAAa,QAAb;AACD,SAXH,EAYGmB,KAZH,CAYUC,GAAD,IAAS;AACdhC,UAAAA,KAAK,CAAC;AACJE,YAAAA,KAAK,EAAE,QADH;AAEJQ,YAAAA,WAAW,EAAE,mBAFT;AAGJD,YAAAA,MAAM,EAAE,OAHJ;AAIJE,YAAAA,UAAU,EAAE;AAJR,WAAD,CAAL;AAMAV,UAAAA,OAAO,CAACW,IAAR,CAAa,QAAb;AACD,SApBH;AAqBD,OA1BD,MA0BO;AACLZ,QAAAA,KAAK,CAAC;AACJE,UAAAA,KAAK,EAAE,qBADH;AAEJQ,UAAAA,WAAW,EAAE,8BAFT;AAGJD,UAAAA,MAAM,EAAE,OAHJ;AAIJE,UAAAA,UAAU,EAAE;AAJR,SAAD,CAAL;AAMAV,QAAAA,OAAO,CAACW,IAAR,CAAa,aAAb;AACD;AACF;AACF,GAtDD;;AAwDA,QAAMqB,eAAe,GAAI5B,CAAD,IAAO;AAC7BR,IAAAA,YAAY,CAACQ,CAAC,CAAC6B,MAAF,CAASxC,KAAV,CAAZ;AACD,GAFD;;AAIA,QAAMyC,eAAe,GAAI9B,CAAD,IAAO;AAC7BN,IAAAA,YAAY,CAACM,CAAC,CAAC6B,MAAF,CAASxC,KAAV,CAAZ;AACD,GAFD;;AAIA,sBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,aAAa,EAAC,QADhB;AAEE,IAAA,IAAI,EAAE,CAAC,KAAD,EAAQ,QAAR,CAFR;AAGE,IAAA,OAAO,EAAC,aAHV;AAIE,IAAA,MAAM,EAAC,gBAJT;AAKE,IAAA,YAAY,EAAC,MALf;AAME,IAAA,MAAM,EAAC,WANT;AAOE,IAAA,eAAe,EAAC,OAPlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASE;AAAM,IAAA,QAAQ,EAAEU,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,MAAM,EAAC,QAAb;AAAsB,IAAA,UAAU,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,WAAW,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CADF,eAIE,oBAAC,KAAD;AACE,IAAA,KAAK,EAAC,KADR;AAEE,IAAA,KAAK,EAAER,SAFT;AAGE,IAAA,IAAI,EAAC,KAHP;AAIE,IAAA,QAAQ,EAAEqC,eAJZ;AAKE,IAAA,IAAI,EAAC,WALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAWE,oBAAC,KAAD;AACE,IAAA,MAAM,EAAC,QADT;AAEE,IAAA,EAAE,EAAC,OAFL;AAGE,IAAA,KAAK,EAAEnC,SAHT;AAIE,IAAA,QAAQ,EAAEqC,eAJZ;AAKE,IAAA,IAAI,EAAC,MALP;AAME,IAAA,IAAI,EAAC,OANP;AAOE,IAAA,WAAW,EAAC,wBAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,eAoBE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBF,eAqBE,oBAAC,QAAD;AAAU,IAAA,MAAM,EAAE,GAAlB;AAAuB,IAAA,KAAK,EAAE9C,QAAQ,CAACc,OAAvC;AAAgD,IAAA,QAAQ,EAAER,QAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBF,eAsBE,oBAAC,IAAD;AAAM,IAAA,MAAM,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,eAAe,EAAEZ,KAAK,CAACqD,MAAN,CAAaC,MADhC;AAEE,IAAA,KAAK,EAAC,OAFR;AAGE,IAAA,MAAM,EAAE;AAAEC,MAAAA,KAAK,EAAE,OAAT;AAAkBC,MAAAA,eAAe,EAAE;AAAnC,KAHV;AAIE,IAAA,IAAI,EAAC,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CAtBF,CATF,CADF,CADF;AA+CD,CA9HD;;AAgIA,eAAepD,QAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport MDEditor from \"@uiw/react-md-editor\";\nimport { Flex, Box, Input, Button, Heading, useToast } from \"@chakra-ui/core\";\nimport theme from \"../../../themes/theme\";\nimport userContext from \"../../../context/userContext\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst EditPage = (props) => {\n  const { blogInfo } = props.location.state.data;\n  const { userData } = useContext(userContext);\n  const [value, setValue] = useState();\n  const [bannerURL, setBannerURL] = useState(\"\");\n  const [blogTitle, setBlogTitle] = useState(\"\");\n  const toast = useToast();\n  const history = useHistory();\n\n  useEffect(() => {\n    setBannerURL(blogInfo.bannerURL);\n    setBlogTitle(blogInfo.title);\n    setValue(blogInfo.content);\n  }, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { user, token } = userData;\n    if (!user) {\n      toast({\n        title: \"Error!\",\n        status: \"error\",\n        description: \"You need to be logged in to Edit that blog.\",\n        isClosable: true,\n      });\n      history.push(\"/user/login\");\n    } else {\n      const editedBlogData = {\n        title: blogTitle,\n        bannerURL: bannerURL,\n        content: value,\n      };\n      const reqURL = `/blogs/${blogInfo.author}/${blogInfo._id}`;\n      if (userData.user.id) {\n        axios.interceptors.request.use((req) => {\n          req.headers[\"x-auth-token\"] = token;\n          return req;\n        });\n        axios\n          .patch(process.env.REACT_APP_BACKEND + reqURL, editedBlogData)\n          .then((res) => {\n            toast({\n              title: \"Successfully Edited!\",\n              description: \"Your blog was updated.\",\n              status: \"success\",\n              isClosable: true,\n            });\n            console.log(res);\n            history.push(\"/blogs\");\n          })\n          .catch((err) => {\n            toast({\n              title: \"Error!\",\n              description: \"Blog edit failed.\",\n              status: \"error\",\n              isClosable: true,\n            });\n            history.push(\"/blogs\");\n          });\n      } else {\n        toast({\n          title: \"Some error occured.\",\n          description: \"Please log in and try again.\",\n          status: \"error\",\n          isClosable: true,\n        });\n        history.push(\"/user/login\");\n      }\n    }\n  };\n\n  const handleBannerURL = (e) => {\n    setBannerURL(e.target.value);\n  };\n\n  const handleBlogTitle = (e) => {\n    setBlogTitle(e.target.value);\n  };\n\n  return (\n    <React.Fragment>\n      <Flex\n        flexDirection=\"column\"\n        maxW={[\"90%\", \"1200px\"]}\n        padding=\"0.5rem 1rem\"\n        border=\"2px solid #eee\"\n        borderRadius=\"10px\"\n        margin=\"1rem auto\"\n        backgroundColor=\"white\"\n      >\n        <form onSubmit={handleSubmit}>\n          <Flex margin=\"1rem 0\" alignItems=\"center\">\n            <Heading marginRight=\"2rem\">Edit Blog</Heading>\n          </Flex>\n          <Input\n            width=\"50%\"\n            value={bannerURL}\n            type=\"url\"\n            onChange={handleBannerURL}\n            name=\"bannerURL\"\n          />\n          <Input\n            margin=\"1rem 0\"\n            id=\"title\"\n            value={blogTitle}\n            onChange={handleBlogTitle}\n            type=\"text\"\n            name=\"title\"\n            placeholder=\"New blog title here...\"\n          />\n          <Box></Box>\n          <MDEditor height={400} value={blogInfo.content} onChange={setValue} />\n          <Flex margin=\"1rem 0\">\n            <Button\n              backgroundColor={theme.colors.accent}\n              color=\"white\"\n              _hover={{ color: \"white\", backgroundColor: \"#323EBE\" }}\n              type=\"submit\"\n            >\n              Publish\n            </Button>\n          </Flex>\n        </form>\n      </Flex>\n    </React.Fragment>\n  );\n};\n\nexport default EditPage;\n"]},"metadata":{},"sourceType":"module"}