{"ast":null,"code":"var _jsxFileName = \"/home/aditya/SemiColon_selenium_tests/project/blog-app/frontend/src/components/pages/NewBlog/NewBlog.component.jsx\";\nimport React, { useContext, useEffect } from \"react\";\nimport MDEditor from \"@uiw/react-md-editor\";\nimport { useState } from \"react\";\nimport { Box, Flex, Text, Heading, Button, Input, useToast } from \"@chakra-ui/core\";\nimport theme from \"../../../themes/theme\";\nimport userContext from \"../../../context/userContext\";\nimport axios from \"axios\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport SEO from \"./../../common/SEO/SEO.component\";\n\nconst NewBlog = () => {\n  const [value, setValue] = useState();\n  const [bannerURL, setBannerURL] = useState(\"\");\n  const [blogTitle, setBlogTitle] = useState(\"\");\n  const {\n    userData\n  } = useContext(userContext);\n  const history = useHistory();\n  const toast = useToast();\n  let isSubmitting = false;\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const {\n      user,\n      token\n    } = userData;\n\n    if (!user) {\n      toast({\n        title: \"Error!\",\n        status: \"error\",\n        description: \"You need to be logged in to publish a blog.\",\n        isClosable: true\n      });\n      history.push(\"/user/login\");\n    } else {\n      const blogData = {\n        title: blogTitle,\n        content: value,\n        author: userData.user.username,\n        date: new Date().toDateString(),\n        bannerURL: bannerURL,\n        authorID: userData.user.id,\n        avatar: userData.user.avatar\n      };\n      const options = {\n        headers: {\n          \"x-auth-token\": userData.token\n        }\n      };\n\n      if (userData.user.id) {\n        axios.post(process.env.REACT_APP_BACKEND + \"/blogs/new\", blogData, options).then(() => {\n          history.push(\"/blogs\");\n          toast({\n            title: \"Blog Published!\",\n            description: \"Please wait for approval :)\",\n            isClosable: true,\n            status: \"success\"\n          });\n          isSubmitting = true;\n        }).catch(err => {\n          toast({\n            title: \"Error!\",\n            description: \"Some error occured while publishing your blog. Please try again.\",\n            isClosable: true,\n            status: \"error\"\n          });\n          history.push(\"/blogs\");\n        });\n      } else {\n        toast({\n          title: \"Error!\",\n          status: \"error\",\n          description: \"You need to be logged in to publish a blog.\",\n          isClosable: true\n        });\n        history.push(\"/user/login\");\n      }\n    }\n  };\n\n  const handleBannerURL = e => {\n    setBannerURL(e.target.value);\n  };\n\n  const handleBlogTitle = e => {\n    setBlogTitle(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SEO, {\n    title: \"Publish your blog.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Flex, {\n    flexDirection: \"column\",\n    maxW: [\"90%\", \"1200px\"],\n    padding: \"0.5rem 1rem\",\n    border: \"2px solid #eee\",\n    borderRadius: \"10px\",\n    margin: \"1rem auto\",\n    backgroundColor: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Flex, {\n    margin: \"1rem 0\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    letterSpacing: \"-.05em\",\n    marginRight: \"2rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"New Blog\")), /*#__PURE__*/React.createElement(Input, {\n    width: \"50%\",\n    value: bannerURL,\n    type: \"url\",\n    onChange: handleBannerURL,\n    name: \"bannerURL\",\n    placeholder: \"Add Banner Image...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    margin: \"1rem 0\",\n    id: \"title\",\n    value: blogTitle,\n    onChange: handleBlogTitle,\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"New blog title here...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MDEditor, {\n    height: 400,\n    value: value,\n    onChange: setValue,\n    previewOptions: {\n      transformLinkUri: null,\n      skipHtml: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Flex, {\n    margin: \"1rem 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    backgroundColor: theme.colors.accent,\n    color: \"white\",\n    _hover: {\n      color: \"white\",\n      backgroundColor: \"#323EBE\"\n    },\n    type: \"submit\",\n    isLoading: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, \"Publish\"), /*#__PURE__*/React.createElement(Button, {\n    marginLeft: \"2rem\",\n    isDisabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"Save as a draft\")))));\n};\n\nexport default NewBlog;","map":{"version":3,"sources":["/home/aditya/SemiColon_selenium_tests/project/blog-app/frontend/src/components/pages/NewBlog/NewBlog.component.jsx"],"names":["React","useContext","useEffect","MDEditor","useState","Box","Flex","Text","Heading","Button","Input","useToast","theme","userContext","axios","useHistory","Redirect","SEO","NewBlog","value","setValue","bannerURL","setBannerURL","blogTitle","setBlogTitle","userData","history","toast","isSubmitting","handleSubmit","e","preventDefault","user","token","title","status","description","isClosable","push","blogData","content","author","username","date","Date","toDateString","authorID","id","avatar","options","headers","post","process","env","REACT_APP_BACKEND","then","catch","err","handleBannerURL","target","handleBlogTitle","transformLinkUri","skipHtml","colors","accent","color","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport MDEditor from \"@uiw/react-md-editor\";\nimport { useState } from \"react\";\nimport {\n  Box,\n  Flex,\n  Text,\n  Heading,\n  Button,\n  Input,\n  useToast,\n} from \"@chakra-ui/core\";\nimport theme from \"../../../themes/theme\";\nimport userContext from \"../../../context/userContext\";\nimport axios from \"axios\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport SEO from \"./../../common/SEO/SEO.component\";\n\nconst NewBlog = () => {\n  const [value, setValue] = useState();\n  const [bannerURL, setBannerURL] = useState(\"\");\n  const [blogTitle, setBlogTitle] = useState(\"\");\n  const { userData } = useContext(userContext);\n  const history = useHistory();\n  const toast = useToast();\n  let isSubmitting = false;\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { user, token } = userData;\n    if (!user) {\n      toast({\n        title: \"Error!\",\n        status: \"error\",\n        description: \"You need to be logged in to publish a blog.\",\n        isClosable: true,\n      });\n      history.push(\"/user/login\");\n    } else {\n      const blogData = {\n        title: blogTitle,\n        content: value,\n        author: userData.user.username,\n        date: new Date().toDateString(),\n        bannerURL: bannerURL,\n        authorID: userData.user.id,\n        avatar: userData.user.avatar,\n      };\n      const options = {\n        headers: {\n          \"x-auth-token\": userData.token,\n        },\n      };\n      if (userData.user.id) {\n        axios\n          .post(process.env.REACT_APP_BACKEND + \"/blogs/new\", blogData, options)\n          .then(() => {\n            history.push(\"/blogs\");\n            toast({\n              title: \"Blog Published!\",\n              description: \"Please wait for approval :)\",\n              isClosable: true,\n              status: \"success\",\n            });\n            isSubmitting = true;\n          })\n          .catch((err) => {\n            toast({\n              title: \"Error!\",\n              description:\n                \"Some error occured while publishing your blog. Please try again.\",\n              isClosable: true,\n              status: \"error\",\n            });\n            history.push(\"/blogs\");\n          });\n      } else {\n        toast({\n          title: \"Error!\",\n          status: \"error\",\n          description: \"You need to be logged in to publish a blog.\",\n          isClosable: true,\n        });\n        history.push(\"/user/login\");\n      }\n    }\n  };\n  const handleBannerURL = (e) => {\n    setBannerURL(e.target.value);\n  };\n\n  const handleBlogTitle = (e) => {\n    setBlogTitle(e.target.value);\n  };\n\n  return (\n    <React.Fragment>\n      <SEO title=\"Publish your blog.\" />\n      <Flex\n        flexDirection=\"column\"\n        maxW={[\"90%\", \"1200px\"]}\n        padding=\"0.5rem 1rem\"\n        border=\"2px solid #eee\"\n        borderRadius=\"10px\"\n        margin=\"1rem auto\"\n        backgroundColor=\"white\"\n      >\n        <form onSubmit={handleSubmit}>\n          <Flex margin=\"1rem 0\" alignItems=\"center\">\n            <Heading letterSpacing=\"-.05em\" marginRight=\"2rem\">\n              New Blog\n            </Heading>\n          </Flex>\n          <Input\n            width=\"50%\"\n            value={bannerURL}\n            type=\"url\"\n            onChange={handleBannerURL}\n            name=\"bannerURL\"\n            placeholder=\"Add Banner Image...\"\n          />\n          <Input\n            margin=\"1rem 0\"\n            id=\"title\"\n            value={blogTitle}\n            onChange={handleBlogTitle}\n            type=\"text\"\n            name=\"title\"\n            placeholder=\"New blog title here...\"\n          />\n          <Box></Box>\n          <MDEditor\n            height={400}\n            value={value}\n            onChange={setValue}\n            previewOptions={{\n              transformLinkUri: null,\n              skipHtml: true,\n            }}\n          />\n          <Flex margin=\"1rem 0\">\n            <Button\n              backgroundColor={theme.colors.accent}\n              color=\"white\"\n              _hover={{ color: \"white\", backgroundColor: \"#323EBE\" }}\n              type=\"submit\"\n              isLoading={isSubmitting}\n            >\n              Publish\n            </Button>\n            {/* Future update : Save draft feature */}\n            <Button marginLeft=\"2rem\" isDisabled={true}>\n              Save as a draft\n            </Button>\n          </Flex>\n        </form>\n      </Flex>\n    </React.Fragment>\n  );\n};\n\nexport default NewBlog;\n"]},"metadata":{},"sourceType":"module"}